<div class="file-manager">
  <div class="section">
    <h3>ğŸ“¤ Dosya YÃ¼kle</h3>
    <div class="row">
      <input type="file" (change)="onFileSelect($event)">
      <input type="text" [(ngModel)]="uploadPath" placeholder="Hedef klasÃ¶r">
      <button (click)="upload()" [disabled]="!selectedFile || uploading">
        {{ uploading ? 'YÃ¼kleniyor...' : 'YÃ¼kle' }}
      </button>
    </div>
    @if (uploading) {
      <div class="progress">
        <div class="progress-bar" [style.width.%]="uploadProgress"></div>
        <span>{{ uploadProgress }}%</span>
      </div>
    }
  </div>

  <div class="section">
    <h3>ğŸ“¥ Dosya Ä°ndir</h3>
    <div class="row">
      <input type="text" [(ngModel)]="downloadPath" placeholder="/path/to/file.txt">
      <button (click)="download()" [disabled]="downloading">
        {{ downloading ? 'Ä°ndiriliyor...' : 'Ä°ndir' }}
      </button>
    </div>
  </div>

  <div class="section">
    <div class="section-header">
      <h3>ğŸ“ Dosyalar: {{ currentPath }}</h3>
      <div class="actions">
        <button (click)="goUp()">Ãœst KlasÃ¶r</button>
        <button (click)="loadFiles()">Yenile</button>
      </div>
    </div>

    @if (loadingFiles) {
      <div class="info">Dosyalar yÃ¼kleniyor...</div>
    } @else {
      <div class="info">Toplam: {{ files.length }} Ã¶ÄŸe</div>
      <div class="table-wrapper">
        <table>
        <thead>
          <tr>
            <th>Ad</th>
            <th>Boyut</th>
            <th>Tarih</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          @for (file of files; track file.name) {
            <tr>
              <td class="name">
                {{ file.isDirectory ? 'ğŸ“' : 'ğŸ“„' }} {{ file.name }}
              </td>
              <td>{{ file.isDirectory ? '-' : (file.size | fileSize) }}</td>
              <td>{{ file.modifiedAt ? (file.modifiedAt | date:'short') : '-' }}</td>
              <td class="actions">
                @if (!file.isDirectory) {
                  <button (click)="downloadFile(file)">Ä°ndir</button>
                } @else {
                  <button (click)="openFolder(file)">AÃ§</button>
                }
              </td>
            </tr>
          }
          @if (files.length === 0) {
            <tr>
              <td colspan="4" class="empty">Bu klasÃ¶rde dosya yok.</td>
            </tr>
          }
        </tbody>
        </table>
      </div>
    }
  </div>

  @if (statusMessage) {
    <div class="status" [class.success]="statusKind === 'success'" [class.error]="statusKind === 'error'" [class.info]="statusKind === 'info'">
      {{ statusMessage }}
    </div>
  }
</div>
